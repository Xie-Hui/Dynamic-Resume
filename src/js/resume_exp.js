var cv = {
    "logo":"",
    "name":"Hui Xie",
    "title":"Computational Designer",
    "intro":"Study architure before, specialize in computational design and fabrication. Eager to learn, like programming.",

    "educationBackground":{
        "title":"Background",

        "graduate":{
            "time":"2015.9-2017.7",
            "school":"School of Architecture, Tsinghua University",
            "degree":"Master of Architecture",
            "gpa":"GPA 3.58/4",
            "courses":"Course: Big Data Analytic, Human-Computer Interaction"
        },
        "minor":{
            "time":"2012.9-2015.7",
            "school":"Department of Computer Science and Technology, Tsinghua University",
            "degree":"Computer Technology Minor",
            "gpa":"GPA 92/100",
            "courses":"Cource: Software Engineering, Computer-Aided Design, Data Structure, C++ Programing, Computer Architecture"
        },
        "undergraduate":{
            "time":"2011.9-2015.7",
            "school":"School of Architecture, Tsinghua University",
            "degree":"Bachelor of Architecture",
            "gpa":"GPA 90/100",
            "courses":"Cource: Fine Art, Calculus, Architecture Design."
        }
    },

    "projects":{
        "title":"Projects",

        "issuu_monitor":{
            "name":"Issuu Crawler",
            //"link":"",
            "brief":"A Issuu crawler to find most liked portfolios",
            "intro":"using urllib+re to realize Issuu.com crawler，find and sort best portfolios and download them",
            "skill":"Python",
            "github":"https://github.com/maajor/IssuuPortfolioCrawler",
            "zhihu":"https://www.zhihu.com/question/38438713/answer/85073618?from=profile_answer_card"
        },

        "vp3dp":{
            "name":"Fused Synergy",
            //"link":"",
            "brief":"Various-property FDM spatial printing with robotic arm",
            "intro":"Mix and extrude multiple materials, freeform spatial printing using robot",
            "skill":"Arduino, Kuka Robot",
            "behance":"https://www.behance.net/gallery/33713362/VP3DP-Robot",
        },

        "physarealm":{
            "name":"Physarealm",
           // "link":"",
            "brief":"Biomimic formfinding inspired by slime mold",
            "intro":"Research slime mold's foraging behavior, using agent-based modelling technique to simulate and develop into archtecture form.",
            "skill":"C#, Grasshopper, Photoshop, Rhino",
            "github":"https://github.com/maajor/Physarealm",
            "behance":"https://www.behance.net/gallery/33713844/Physarealm",
            "food4rhino":"http://www.food4rhino.com/project/physarealm?ufh"
        },

        "elders_ambition":{
            "name":"Elder's Ambition",
           // "link":"",
            "brief":"A Magic Tower-like RPG game to rescue software engineering's world",
            "intro":"Best project of 2014 Software Engineering Course. I am responsible for UI/UX design.",
            "skill":"Photoshop, Qt, C++",
            "github":"https://github.com/a-serious/elders-ambition",
            "se2014":"http://soft.cs.tsinghua.edu.cn/blog/?q=se2014"
        },

        "ife":{
            "name":"Baidu IFE",
           // "link":"",
            "brief":"Participate IFE to learn Front-end engineering skills.",
            "intro":"Making a native javascript image showcase library 'm-album' in final project",
            "skill":["HTML" , "CSS", "Javascript"],
            "github":"https://github.com/xuteam"
        },

        "fingerprint":{
            "name":"Fingerprint on Painting",
           // "link":"",
            "brief":"HCI Course Project",
            "intro":"Finetune CNN to recognize style and artist of paintings",
            "skill":["Python" , "Caffe"],
            "github":"https://github.com/THU-HCI2016-MLGroup/FingerprintOnPaintings"
        }

    },


    "awards":{
        "title":"Awards",

        "excellent":{
            "time":2016,
            "name":"Excellent Graduate of Tsinghua University",
            "institution":"Tsinghua University",
            "intro":"Awarded to top 10% of graduates."
        },

        "dada":{
            "time":2015,
            "name":"DADA2015 Best Student Paper",
            "institution":"Digital Architecture Design Association, Architect Branch, Architectural Society of China",
            "intro":"Title: Parametric Design and Fabrication of Irregular Scissor-Pair Structure，only undergraduate receiver."
        },

        "evolo":{
            "time":2014,
            "name":"Evolo Skyscraper Competition Honorable Mention",
            "institution":"eVolo Magazine",
            "intro":"Concept architecture competition，receipient: 20/600+ entries. Responsible for modelling and rendering."
        },

        "national_award":{
            "time":2012,
            "name":"National Scholarship",
            "institution":"Ministry of Education of the People's Republic of China",
            "intro":"For outstanding academic performance in freshman year. GPA 1/96"
        },

        "software_award":{
            "time":2014,
            "name":"Best project for 2014's Software Engineering Course",
            "institution":"2014 Software Engineering Course",
            "intro":"Project\"Elder's Ambition\"，responsible for UI/UX deign"
        },

        "innovation_award":{
            "time":2014,
            "name":"Innovation Awards",
            "institution":"Tsinghua University",
            "intro":"Receive for many inovations in junior year."
        },

    },

    "workExperience":{
        "title":"Experience",


        "netease":{
            "time":"2016.7-2016.9",
            "position":"Technical Artist Intern",
            "company":"NetEase Game",
            "role":"Procedural modelling of sandtable scene, make procedureal terrain generation pipeline for artist, experiment on procedural generation of traditional chinese architecture."
        },

        "xwg":{
            "time":"2015.9-",
            "position":"Assistant Architect",
            "company":"XWG Archi-studio",
            "role":"Parametric modelling and rendering"
        },

        "shanghai":{
            "time":"2015.5-2015.8",
            "position":"Architecture Intern",
            "company":"Shanghai Xian Dai Architectural Design (Group)Co.,Ltd",
            "role":"Parametric modelling and rendering"
        },

        "freelancer":{
            "time":"2014.9-",
            "position":"",
            "company":"Freelancer(part-time)",
            "role":"programming, modelling, rendering and design work."
        }
    },

    "skills":{
        "title":"Skills",

        "modelling":{
            "name":"3D Modelling",
            "proficency":"Expert",
            "intro":"4 year experience using Rhinoceros, Confident with Maya and 3dsMax."
        },

        "unity":{
            "name":"Game Engine",
            "proficency":"Proficent",
            "intro":"Write Unity scripts and Shader，familier with asset optimization methods"
        },

        "pcg":{
            "name":"Procedural Generating Contents",
            "proficency":"Expert",
            "intro":"Expert with WorldMachine, SpeedTree and CityEngine"
        },

        "frontend":{
            "name":"Front End Tools",
            "proficency":"Familier",
            "intro":"can write semantic HTML，know new features in CSS3，proficient with JQuery，know some Three.js"
        },

        "design":{
            "name":"2D Graphic",
            "proficency":"Expert",
            "intro":"many year's experience in Photoshop、Illustrator and Indesign"
        },

        "prototype":{
            "name":"Prototype",
            "proficency":"Proficent",
            "intro":"Proficient with Arduino interation，have basic electronic circuit knowledge，able to create 3dprint machine parts"
        },

        "coding":{
            "name":"Coding",
            "proficency":"Proficent",
            "intro":"Good at develop C# plugin for Rhinoceros，Familier with Unity3D script，have experience in data analysis and web crawler，know about MEL, HLSL and GLSL"
        }
    }

}

var objects = []
    parents = []
    targets = []
    levels = []


function createDOM(

    parentNode,
    position,
    JsonData = cv,  //default
    treeDepth = 0,   //default

){

    // create a new container for parentNode
    var newContainer = document.createElement("div")
    newContainer.className = parentNode.className


    //console.log(newContainer.className)

    for (key in JsonData){

        //console.log(key);
        var newNode = document.createElement("div")
        newNode.className = parentNode.className + "-" + key

        if (JsonData[key] instanceof Object){

            //if this is an entry, then create a new container to wrap its items
            newNode.textContent = key
            createDOM(newNode, position, JsonData[key], treeDepth + 1)

        }
        else {

            newNode.textContent = JsonData[key]

        }

        newContainer.appendChild(newNode)

    }

    parentNode.appendChild(newContainer) //draw a container on the canvas

    if ( treeDepth == 0 ) {

        createCSSobj( newContainer, position )

    }

    if ( treeDepth == 1 ) {

        position.x += Math.random() * 3000 - 1500
        position.y += Math.random() * 3000 - 1500
        position.z = -100
        createCSSobj( newContainer, position )

    }

    if ( treeDepth == 2 ) {

        position.x += Math.random() * 300 - 150
        position.y += Math.random() * 300 - 150
        position.z = -100
        createCSSobj( newContainer, position )

    }

}


function createCSSobj(

    node,
    position

) {

    var object = new THREE.CSS3DObject(node);
    //console.log(position);
    object.position.x = position.x
    object.position.y = position.y
    object.position.z = position.z
    //console.log(object);
    scene.add(object)
    //console.log(object.position);
    //document the container elements
    objects.push(object)
    //console.log(parentNode);
    //console.log(objects);

}



function createCvElements() {

    //init parentNode
    var parentNode = document.createElement("div")
    parentNode.className =  "cv"
    var position = new THREE.Vector3(0, 0, 0)
    position.x = 0
    position.y = 0
    position.z = -100
    createDOM(parentNode, position)


    //createCSSobjs(parentNode.children[0], position)
    console.log(parentNode.children[0])
    var nameCard = parentNode.children[0]

    var j = 0

    for ( var i = 0; i < nameCard.childNodes.length; i++ ) {

        //console.log(nameCard.childNodes[ i ].childElementCount)

        if ( nameCard.childNodes[ i ].childElementCount ) {

            j++
            position.x = Math.random() * 3000 - 1500
            position.y = Math.random() * 3000 - 1500
            position.z = -500
            console.log(nameCard.childNodes[ i ].children[0]);
            //createCSSobjs(nameCard.childNodes[ k ].children[0], position)
            var section = nameCard.childNodes[ i ].children[0]
            var sub_position = position
            console.log("-------");

            for ( var k = 0; k < section.childNodes.length; k++ ) {

                if ( section.childNodes[ k ].childElementCount ) {

                    sub_position.x = position.x + Math.random() * 500 - 250
                    sub_position.y = position.y + Math.random() * 500 - 250
                    sub_position.z = position.z
                    console.log( "---", section.childNodes[ k ].children[0] );
                    //createCSSobjs(section.childNodes[ k ].children[0], position)

                }

            }
            //console.log(position);

        }
        //console.log(levels[i]); //depth of the element in the tree
        //console.log(nodeIndex[i]);
        //console.log( objects[i].element.parent.childElementCount ); //index of the element in the tree
        //console.log("---");

    }
}
