function setup(){camera=new THREE.PerspectiveCamera(38,window.innerWidth/window.innerHeight,1,1e4),camera.position.z=7500,scene=new THREE.Scene,sceneWebgl=new THREE.Scene,prvTarget=new THREE.Vector3(0,0,6e3),camera.lookAt(prvTarget),sceneWebgl.fog=new THREE.Fog(1119021,1,1e4),renderer=new THREE.CSS3DRenderer,renderer.setSize(window.innerWidth,window.innerHeight),renderer.domElement.style.position="absolute",renderer.domElement.style.top=0,document.getElementById("container").appendChild(renderer.domElement),rendererWebgl=new THREE.WebGLRenderer({antialias:!0,alpha:!0}),rendererWebgl.setPixelRatio(window.devicePixelRatio),rendererWebgl.setSize(window.innerWidth,window.innerHeight),rendererWebgl.domElement.style.position="absolute",rendererWebgl.domElement.style.zIndex=-1,rendererWebgl.domElement.style.top=0,document.getElementById("container").appendChild(rendererWebgl.domElement),scene.add(camera),createParticles(),createCvElements(),window.addEventListener("resize",onWindowResize,!1)}function createParticles(){group=new THREE.Group,sceneWebgl.add(group);for(var e=2*Math.PI,n=20,t=10,r=5e3,a=0;r>a;a++){for(var o=2e4*Math.random()-1e4,i=2e4*Math.random()-1e4,d=6e3*Math.random(),E=new THREE.LineBasicMaterial({color:new THREE.Color(4673+61166*Math.random()),linewidth:10}),s=new THREE.Geometry,c=0;n>c;c++){var l=c/(n-1)*e;s.vertices.push(new THREE.Vector3(o+Math.cos(l)*t,i+Math.sin(l)*t,d))}var m=new THREE.Line(s,E);E=null,s=null,group.add(m)}}function particleUpdate(){for(var e in group.children){var n=group.children[e];n.position.x+=2*Math.random()-1,n.position.y+=2*Math.random()-1,n.position.z+=2*Math.random()-1}}function transform(e,n,t){TWEEN.removeAll(),new TWEEN.Tween(camera.position).to({x:n.x+500*Math.random()-250,y:n.y+500*Math.random()-250,z:n.z},t).easing(TWEEN.Easing.Exponential.InOut).start(),new TWEEN.Tween(prvTarget).to({x:e.x,y:e.y,z:e.z},t).easing(TWEEN.Easing.Exponential.InOut).onUpdate(function(){camera.lookAt(prvTarget)}).start()}function flyTo(e,n,t,r){var a=cv_objects[t+"Objects"],o=cv_objects[t+"Desired"];TWEEN.removeAll(),new TWEEN.Tween(camera.position).to({x:n.x+500*Math.random()-250,y:n.y+500*Math.random()-250,z:n.z},r).easing(TWEEN.Easing.Exponential.InOut).start(),new TWEEN.Tween(prvTarget).to({x:e.x,y:e.y,z:e.z},r).easing(TWEEN.Easing.Exponential.InOut).onUpdate(function(){camera.lookAt(prvTarget)}).start();for(var i=0;i<a.length;i++){var d=a[i],e=o[i];new TWEEN.Tween(d.position).to({x:e.position.x,y:e.position.y,z:e.position.z},Math.random()*r+.5*r).easing(TWEEN.Easing.Exponential.InOut).start(),new TWEEN.Tween(d.rotation).to({x:e.rotation.x,y:e.rotation.y,z:e.rotation.z},Math.random()*r+.5*r).easing(TWEEN.Easing.Exponential.InOut).start()}new TWEEN.Tween(this).to({},2*r).onUpdate(render).start()}function flyAway(e,n,t,r){var a=cv_objects[t+"Objects"];cv_objects[t+"Desired"];TWEEN.removeAll(),new TWEEN.Tween(camera.position).to({x:n.x+500*Math.random()-250,y:n.y+500*Math.random()-250,z:n.z},r).easing(TWEEN.Easing.Exponential.InOut).start(),new TWEEN.Tween(prvTarget).to({x:e.x,y:e.y,z:e.z},r).easing(TWEEN.Easing.Exponential.InOut).onUpdate(function(){camera.lookAt(prvTarget)}).start();for(var o=0;o<a.length;o++){var i=a[o],d=new THREE.Vector3((1e4*Math.random()+1e4)*(Math.random()>.5?1:-1),(1e4*Math.random()+1e4)*(Math.random()>.5?1:-1),5e3*Math.random()-5e3),E=new THREE.Vector3(Math.random(),Math.random(),Math.random());new TWEEN.Tween(i.position).to({x:d.x,y:d.y,z:d.z},Math.random()*r+.5*r).easing(TWEEN.Easing.Exponential.InOut).start(),new TWEEN.Tween(i.rotation).to({x:E.x,y:E.y,z:E.z},Math.random()*r+.5*r).easing(TWEEN.Easing.Exponential.InOut).start()}new TWEEN.Tween(this).to({},2*r).onUpdate(render).start()}function animate(){requestAnimationFrame(animate),TWEEN.update(),render()}function render(){particleUpdate(),renderer.render(scene,camera),rendererWebgl.render(sceneWebgl,camera),cameraWander()}function onWindowResize(){camera.aspect=window.innerWidth/window.innerHeight,camera.updateProjectionMatrix(),renderer.setSize(window.innerWidth,window.innerHeight),rendererWebgl.setSize(window.innerWidth,window.innerHeight),render()}function mousewheel(e){e.preventDefault(),e.stopPropagation();var n=0;e.wheelDelta?n=e.wheelDelta/40:e.detail&&(n=-e.detail/3),camera.position.z+=100*n}function cameraWander(){var e=new Date/2e3,n=5;camera.position.x+=Math.sin(e)*n,camera.position.y+=Math.cos(e)*n/5,camera.lookAt(prvTarget)}var lang=["cn","en"],currentLang=0,camera,scene,renderer,fixcamera,controler,cameraHelper,activecamera,prvTarget,sceneWebgl,rendererWebgl;window.onload=function(){setup(),animate()};
function createCvElements(){var e=document.getElementById("container"),t=document.createElement("div");t.className="namecard-container";for(var o=Object.keys(cv),a=0;a<o.length;a++){var n=o[a],i=cv[n];if(i instanceof Object){var r=Object.keys(i),s=document.createElement("div");s.className=n+"-container",e.appendChild(s);var c=document.createElement("div");c.className=n+"-container";var m=r[0],d=document.createElement("div");d.className=n+"-"+m,d.textContent=i[m],c.appendChild(d),e.appendChild(c);var l=o.length,h=180+50*Math.random(),p=Math.random()*(6/l)+a*(12/l),u=900-150*a,v=-220,b=6e3,E=new THREE.CSS3DObject(c);E.position.x=u,E.position.y=v,E.position.z=b,scene.add(E);var f=3e3+1e3*Math.random(),g=Math.random()*(6/l)+a*(12/l),w=Math.sin(g)*f,M=Math.cos(g)*f,y=1e3*Math.random()+2e3,j=new THREE.Vector3(w,M,y),C=w+1e3*Math.random()-500,k=M+1e3*Math.random()-500,P=y+1500,T=new THREE.Vector3(C,k,P),O=new THREE.Vector3((1e4*Math.random()+1e4)*(Math.random()>.5?1:-1),(1e4*Math.random()+1e4)*(Math.random()>.5?1:-1),5e3*Math.random()-5e3),R=new THREE.Vector3(8e3*Math.random()-4e3,8e3*Math.random()-4e3,5e3*Math.random()),H=new THREE.CSS3DObject(s);H.position.copy(O),H.lookAt(R),scene.add(H);var D=new THREE.CSS3DObject(s);D.position.copy(j),D.lookAt(T),console.log(n+"Objects"),cv_objects[n+"Objects"].push(H),cv_objects[n+"Desired"].push(D),nodePositions[s.className+"target"]=D,nodePositions[s.className+"vector"]=T,nodePositions[s.className+"name"]=n,c.addEventListener("click",function(){var e=nodePositions[this.className+"target"],t=nodePositions[this.className+"vector"],o=nodePositions[this.className+"name"];flyTo(e.position,t,o,1e3)},!1),s.addEventListener("click",function(){var e=nodePositions[this.className+"name"];flyAway(oriTarget,oriFrom,e,1e3)},!1);for(var S=0;S<r.length;S++){var N=r[S],_=i[N];if(_ instanceof Object){var x=Object.keys(_),A=document.createElement("div");A.className=n+"-item-container",e.appendChild(A);for(var V=0;V<x.length;V++){var I=x[V],z=document.createElement("div");if(-1!=Object.keys(icons).indexOf(I)){z.className="cv-item-icon";var B=document.createElement("a");B.href=_[I],B.target="_blank";var G=document.createElement("i");G.className=icons[I],B.appendChild(G),z.appendChild(B),A.appendChild(z)}else z.className=n+"-"+I,z.textContent=_[I];A.appendChild(z)}var L=r.length,h=section_item_r[a]+50*Math.random(),p=Math.random()*(1/L)+(S+.5)*(6.3/L),F=new THREE.Vector3(w+Math.sin(p)*h,M+Math.cos(p)*h,y+300*Math.random()-500),U=new THREE.Vector3((1e4*Math.random()+1e4)*(Math.random()>.5?1:-1),(1e4*Math.random()+1e4)*(Math.random()>.5?1:-1),5e3*Math.random()-5e3),J=new THREE.Vector3(8e3*Math.random()-4e3,8e3*Math.random()-4e3,5e3*Math.random()),E=new THREE.CSS3DObject(A);E.position.copy(U),E.lookAt(J),scene.add(E);var X=new THREE.CSS3DObject(s);X.position.copy(F),X.lookAt(T),cv_objects[n+"Objects"].push(E),cv_objects[n+"Desired"].push(X)}else{var z=document.createElement("div");z.className=n+"-"+N,z.textContent="返回",s.appendChild(z)}}}else{var z=document.createElement("div");z.className="namecard-"+n,z.textContent=cv[n],t.appendChild(z)}}var E=new THREE.CSS3DObject(t);E.position.x=0,E.position.y=0,E.position.z=6e3,scene.add(E);var E=new THREE.Object3D;E.position.x=0,E.position.y=0,E.position.z=6e3}var cv={logo:"",name:"马逸东",title:"前端工程师 | 运算化设计师",intro:"曾学习建筑学，擅长参数化设计与数字建造。善于学习，喜欢编程，希望能成为前端工程师。",educationBackground:{title:"教育背景",graduate:{time:"2015.9-2017.7",school:"清华大学建筑学院",degree:"建筑学硕士",gpa:"GPA 3.58/4",courses:"参加课程: 大数据分析、人机交互"},minor:{time:"2012.9-2015.7",school:"清华大学计算机系",degree:"计算机技术辅修",gpa:"GPA 92/100",courses:"参加课程: 软件工程、计算机辅助设计、数据结构、C++程序设计、计算机系统与组成结构"},undergraduate:{time:"2011.9-2015.7",school:"清华大学建筑学院",degree:"建筑学学士",courses:"参加课程: 素描水彩、微积分、建筑设计。担任班级生活与学习委员。获得过国家奖学金。"}},projects:{title:"项目经验",issuu_monitor:{name:"Issuu Crawler",brief:"Issuu爬虫，寻找最赞作品集",intro:"用urllib+re实现Issuu.com爬虫，寻找最赞作品集并排序以及下载",skill:["Python"],github:"https://github.com/maajor/IssuuPortfolioCrawler",zhihu:"https://www.zhihu.com/question/38438713/answer/85073618?from=profile_answer_card"},vp3dp:{name:"VP3DP",brief:"多材质机械臂空间FDM打印",intro:"将多种材料混合挤出，用机械臂控制实现空间自由打印",skill:["Arduino","Kuka Robot"],behance:"https://www.behance.net/gallery/33713362/VP3DP-Robot"},physarealm:{name:"Physarealm",brief:"黏菌仿生找形",intro:"模仿黏菌觅食过程，实现Agent-Based Modelling找形，并发展为建筑形态",skill:["C#","Grasshopper","Photoshop","Rhino"],github:"https://github.com/maajor/Physarealm",behance:"https://www.behance.net/gallery/33713844/Physarealm",food4rhino:"http://www.food4rhino.com/project/physarealm?ufh"},elders_ambition:{name:"长者之野望",brief:"拯救软件工程世界的魔塔RPG游戏",intro:"2014年软件工程课年度最佳作品，主要负责UI/UX设计",skill:["Photoshop","Qt","C++"],github:"https://github.com/a-serious/elders-ambition",se2014:"http://soft.cs.tsinghua.edu.cn/blog/?q=se2014"},ife:{name:"百度前端学院",brief:"参加百度IFE学习前端技术",intro:"正在进行中......",skill:["HTML","CSS","Javascript"],github:"https://github.com/xuteam"}},awards:{title:"获奖",dada:{time:2015,name:"DADA2015最佳学生论文奖",institution:"中国建筑学会数字建筑专委会颁发",intro:"数字建筑专委会国际会议论文。题目：不规则剪式铰的参数化设计与建造，唯一本科获奖者。"},evolo:{time:2014,name:"Evolo摩天楼竞赛 荣誉提名",institution:"evolo杂志社颁发",intro:"国际建筑概念设计竞赛获奖，提名奖总共20/600+。主要负责建模与效果图制作。"},national_award:{time:2012,name:"国家奖学金",institution:"中国教育部颁发",intro:"大一学期成绩优秀获奖"},software_award:{time:2014,name:"软件工程课年度最佳项目",institution:"软件工程全校通选课颁发",intro:'项目"长者之野望"，主要负责UI/UX设计'},innovation_award:{time:2014,name:"科技创新奖学金",institution:"清华大学颁发",intro:"大三学期参加科创活动成果较多，获得奖励"}},workExperience:{title:"工作经历",xwg:{time:"2015.9-",position:"助理建筑师",company:"XWG工作室",role:"主要负责参数化建模与渲染"},shanghai:{time:"2015.5-2015.8",position:"建筑实习生",company:"上海市建筑设计研究院",role:""},freelancer:{time:"2014.9-",position:"",company:"自由职业者(兼职)",role:"从事程序开发、建模、渲染、建筑设计等工作"}},skills:{title:"技能",html:{name:"HTML/CSS",proficency:"熟练",intro:"能够编写语义化HTML，了解HTML5和CSS3新特性。熟悉Sass预处理。能够用Bootstrap快速开发"},javascript:{name:"Javascript",proficency:"熟练",intro:"熟悉JQuery，会用Gulp构建项目。对React有初步了解"},visulize:{name:"可视化工具",proficency:"熟悉",intro:"会使用Three.js，熟练掌握Processing与Grasshopper"},design:{name:"设计工具",proficency:"精通",intro:"常年使用Photoshop、Illustrator和Indesign"},python:{name:"Python",proficency:"熟悉",intro:"对爬虫和数据处理有一定经验"},csharp:{name:"C#",proficency:"熟练",intro:"掌握C#Rhino二次开发，了解WPF"}}},nodePositions={},auxBoxes={},oriTarget=new THREE.Vector3(0,0,6e3),oriFrom=new THREE.Vector3(0,0,7500),icons={github:"fa fa-github",zhihu:"fa fa-comment",behance:"fa fa-behance",se2014:"fa fa-graduation-cap",food4rhino:"fa fa-bug",baidu:"fa fa-terminal"},section_item_r=[300,300,300,300,400,450,350,300,300,300,300],cv_objects={educationBackgroundObjects:[],educationBackgroundDesired:[],projectsObjects:[],projectsDesired:[],awardsObjects:[],awardsDesired:[],workExperienceObjects:[],workExperienceDesired:[],skillsObjects:[],skillsDesired:[]};